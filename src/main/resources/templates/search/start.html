<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/main}">

<head>
    <title>Search - MINARI</title>
    <!-- Add CSRF token -->
    <meta name="csrf-token" th:content="${_csrf.token}" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/menu.css}">
    <!-- Navbar CSS handled by layout -->
    <style>
        .search-tag {
            display: inline-block;
            padding: 8px 16px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 99px;
            color: #333;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s;
        }

        .search-tag:hover {
            background-color: #f5f5f5;
            border-color: #ccc;
            color: #000;
        }
    </style>
</head>

<body>
    <div layout:fragment="content">
        <div class="container pb-5" style="padding-top: 20px;">
            <div class="search-container mb-4 d-flex justify-content-between align-items-center">
                <!-- LOGO (Optional, but reference has it. Layout already has header, but maybe this page hides it? Reference extends 'partials.navbar-scripts' but seems to build its own structure in body. 
                     Wait, reference `search-start` has `<div class="menu"></div>` and manual logo. 
                     If we use `layouts/main`, we might duplicate the header.
                     The user said "masuk ke laman search dulu...".
                     Let's check if `layouts/main` is appropriate. `layouts/main` adds a navbar. 
                     The reference `search-start` has a close button and its own logo header.
                     It looks like `search-start` is an OVERLAY or a standalone page.
                     Let's stick to `layouts/main` for consistency but maybe hide the nav if we want exact match.
                     However, simpler is better. Let's use `layouts/main` content area.
                     Actually, looking at reference `search-start.blade.php`:
                     It has a custom header with Close Button.
                     If I use `layouts/main`, I get the standard navbar.
                     The user wants "Intermediate page".
                     Let's replicate the reference content inside the main layout for now. 
                     It might look slightly different (double nav?) or we can hide the main nav if we want.
                     Ref: `search-start` line 40: `search-container mb-4 d-flex justify-content-between` with Logo and Close.
                     If I use `layouts/main`, I should probably NOT render the logo line inside content to avoid redundancy.
                     BUT, the reference has a "Close" button that goes back.
                     Let's keep the content as is, but maybe remove the Logo partial if it conflicts.
                     Reference `search-start` does NOT include `partials.navbar` in the body, only `navbar-scripts` in head.
                     So it is likely a STANDALONE full page.
                     To match reference *exactly*, I should probably NOT use `layout:decorate` or use a "blank" layout.
                     But `layouts/main` provides CSS/JS.
                     Let me disable the `layouts/main` header for this specific page? Use `layout:fragment="content"` implies using the layout.
                     I'll assume using strict content port is safer for now. I'll include the logo line as reference does.
                -->

                <!-- LOGO -->
                <a th:href="@{/home}">
                    <img th:src="@{/images/logofix.png}" alt="MINARI Logo" class="logo-img" style="height: 40px;">
                </a>

                <!-- CLOSE BUTTON (To Home/Back) -->
                <a href="#" onclick="history.back(); return false;" class="text-dark"
                    style="text-decoration: none; font-size: 2rem; line-height: 1;">&times;</a>
            </div>

            <!-- SEARCH BAR -->
            <div class="mb-5">
                <div class="search-wrapper d-flex align-items-center">
                    <!-- Back Button -->
                    <a href="javascript:history.back()" class="text-reset me-3"
                        style="text-decoration: none; font-size: 1.5rem;">
                        <i class="bi bi-arrow-left"></i>
                    </a>

                    <form th:action="@{/search}" method="GET" style="width: 100%;">
                        <input type="text" name="q"
                            class="search-bar form-control border-0 border-bottom rounded-0 shadow-none ps-0"
                            placeholder="keywords" autofocus style="background: transparent; font-size: 18px;">
                    </form>
                </div>
            </div>

            <!-- SEARCH RECOMMENDATIONS -->
            <div>
                <div class="mb-4">
                    <h6 class="fw-bold mb-3">Trending</h6>
                    <div class="d-flex flex-wrap gap-2">
                        <!-- Hardcoded trends from reference -->
                        <a th:href="@{/search(q='Celana Barrel')}" class="search-tag">Celana Barrel</a>
                        <a th:href="@{/search(q='Koleksi Jeans')}" class="search-tag">Koleksi Jeans</a>
                        <a th:href="@{/search(q='Koleksi Flannel')}" class="search-tag">Koleksi Flannel</a>
                        <a th:href="@{/search(q='Winter Travel')}" class="search-tag">Winter Travel</a>
                        <a th:href="@{/search(q='Kaos Kaki HEATTECH')}" class="search-tag">Kaos Kaki HEATTECH</a>
                    </div>
                </div>

                <div class="mb-4">
                    <h6 class="fw-bold mb-3">Riwayat pencarian</h6>
                    <!-- Placeholder for history -->
                    <p class="text-muted small">Anda dapat melihat riwayat pencarian Anda di sini.</p>
                </div>
            </div>
        </div>

        <script>
            // Auto focus search input
            document.addEventListener('DOMContentLoaded', function () {
                const input = document.querySelector('input[name="q"]');
                if (input) input.focus();
            });
        </script>
    </div>
</body>

</html>